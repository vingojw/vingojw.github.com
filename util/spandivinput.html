<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<body>
<style>
	span{
		border:1px solid red;
	}
</style>
 <div>
  <span id="childSpan" class="vv">用户名</span>
 </div>
<input type="button" id="v" value="将span替换成input">
<input type="button" id="vv" value="将input替换成span">
<script>
function $$(id){
	return document.getElementById(id);
}

var par  = $$('childSpan').parentNode;

$$('v').onclick = function(){
	replaceDom($$('childSpan'),'input',['id','className']);
}

$$('vv').onclick = function(){
	replaceDom($$('childSpan'),'span',['id','className']);
}

//input 和 span\div 互转

/**
 * [replaceDom description]
 * @param  {[type]} oldChild 原来的元素
 * @param  {[type]} tagName  替换成
 * @param  {[type]} optArr   要同步的属性 比如 className 等等
 * @return {[type]}          [description]
 */
function replaceDom(oldChild,tagName,optArr){
	//已经替换过，再次替换，返回
	if(oldChild.tagName.toLowerCase() == tagName.toLowerCase()){
		return;
	}
	var newChild = document.createElement(tagName);
	tagName.toLowerCase() == 'span div';
	var s = ['value','innerHTML'];

	if( (' span div ').indexOf(" "+ tagName.toLowerCase() +" ") > -1 ){
		//如果要替换的元素 是 span 或者 div，那么说明是把value 赋值到 innerHTML
		s = s.reverse();
	}
	newChild[s[0]] = oldChild[s[1]];
	for (var i = 0, len = optArr.length; i < len; i++) {
		newChild.setAttribute(optArr[i],oldChild.getAttribute(optArr[i]));
	};
	oldChild.parentNode.replaceChild(newChild,oldChild);
}




</script>
</body>
</html>
