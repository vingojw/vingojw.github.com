<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>深层嵌套</title>
<style type="text/css">
    span{
    	border:1px solid red;
    };
</style>
</head>
<body>
<input id="range" type="text"><input type="text" placeholder="实际span数量" onfocus="javascript: this.value = document.getElementsByTagName('span').length">
 <div id="vin"></div>
 <script>
 var s = '<span>深层嵌套</span>';

 function ss(str,start,end,num){
   return  new Array(num+1).join(start) + str + new Array(num+1).join(end);
 }

 function render(num){
 	console.time('总时长');

 	console.time('生成html时间');
 	var _html = ss(s,'<span>','</span>',+num);
 	console.timeEnd('生成html时间');

 	console.time('插入DOM时间');
 	document.getElementById('vin').innerHTML = _html;
 	console.timeEnd('插入DOM时间');

 	console.timeEnd('总时长');
 }

 document.getElementById('range').addEventListener('input',function(){
 	if(this.value > 20001){
 		console.log('超过 20001很卡');
 		return;
 	}
 	render(this.value);
 },false);

 </script>
</body>
</html>